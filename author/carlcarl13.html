<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>carlcarl's blog - carlcarl</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
            <meta property="og:site_name" content="carlcarl's blog" />
                <meta property="og:type" content="website" />
                <meta property="og:title" content="carlcarl's blog" />
                <meta property="og:url" content="http://blog.carlcarl.me" />
                <meta property="og:description" content="carlcarl's blog" />
            <link rel="stylesheet" href="http://blog.carlcarl.me/theme/css/normalize.css">
        <link href='//fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
        <link href='//fonts.googleapis.com/css?family=Oswald' rel='stylesheet' type='text/css'>
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" rel="stylesheet">
        <link rel="stylesheet" href="http://blog.carlcarl.me/theme/css/main.css">

    <link rel="stylesheet" href="http://blog.carlcarl.me/theme/css/blog.css">
    <link rel="stylesheet" href="http://blog.carlcarl.me/theme/css/github.css">
        <link href="http://blog.carlcarl.me/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="carlcarl's blog Atom Feed" />
        <script src="http://blog.carlcarl.me/theme/js/vendor/modernizr-2.7.1.min.js"></script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

        <div id="wrapper">
<header id="sidebar" class="side-shadow">
        <h1><a id="site-title" href="http://blog.carlcarl.me"><i class="fa fa-coffee"></i> carlcarl's blog</a></h1>
        <p id="site-desc"></p>
    <nav>
        <ul id="nav-links">
        </ul>
    </nav>
<footer id="site-info">
    <p>
        Proudly powered by <a href="http://getpelican.com/" target="pelican">Pelican</a> and <a href="http://python.org/" target="python">Python</a>. Theme by <a href="https://github.com/hdra/pelican-cait" target="github">hndr</a>.
    </p>
    <p>
        Textures by <a href="http://subtlepatterns.com/" target="subtlepatterns">Subtle Pattern</a>. Font Awesome by <a href="http://fortawesome.github.io/Font-Awesome/" target="github">Dave Grandy</a>.
    </p>
</footer></header>
    <div id="post-container">
        <ol id="post-list">
            <li>
                <article class="post-entry">
                    <header class="entry-header">
                        <time class="post-time" datetime="2012-02-19T00:55:00" pubdate>
                            Sun 19 February 2012
                        </time>
                        <a href="http://blog.carlcarl.me/258/vsphere-failed-to-open-disk-scsi00/" rel="bookmark"><h1>[vsphere]Failed to open disk scsi0:0</h1></a>
                    </header>
                    <section class="post-content">
                        <p>今天想試試看利用網路上的 Virtual Appliance 開 VM，下載完後利用 client
介面就可以上傳到 datastore，可是在新增 VM，並選擇完 vmdk
檔後，開啟VM時就出現了錯誤訊息囧。</p>
<p>錯誤訊息內容: <code>Failed to open disk scsi0:0: Unsupported and/or invalid
disk type 7.</code></p>
<p>Google 了一下，似乎是下載下來後還要做轉換（後來看官方的安裝手冊也是的確講要這樣做 orz）。<br />
首先要先連到有和上傳的 datastore 連線的 esxi server，接著進到 <code>/vmfs/volumes/你的datastore/</code>，利用以下指令做轉換：</p>
<div class="highlight"><pre>vmkfstools -i 你原來的vmdk檔 轉完的vmdk檔名
</pre></div>


<p>兩個檔案名稱不要重複，轉完之後 ...</p>
                    </section>
                </article>
                <hr/>
            </li>
            <li>
                <article class="post-entry">
                    <header class="entry-header">
                        <time class="post-time" datetime="2012-02-17T21:43:00" pubdate>
                            Fri 17 February 2012
                        </time>
                        <a href="http://blog.carlcarl.me/254/quorum-read/" rel="bookmark"><h1>Quorum read</h1></a>
                    </header>
                    <section class="post-content">
                        <p>最近在看 paper，剛好看到這個名詞，似乎是 Cassandra 有用到的一個技巧。</p>
<p>在 cluster
的環境中，有時候並不能保證說讀取到的值一定會是最新的，可能會因為架構或設計上的不同，可能在做
replication 的部份是非同步進行的，所以更大大增加拿到舊值的機率。</p>
<p>此方法簡單說就是讀取多個 node 的值來作比較，基本上這些值都會有
timestamp，所以可以根據時間的新舊來決定該用哪個值，但是還是會有一些問題，像是如果讀到的值都是舊的那該怎麼辦，如果變成一次測全部
node 的值，效能上不用說一定會很慢，所以這個問題我不知道是怎麼解決的。</p>
<p>其實還滿詭異的，如果真的要要求資料一致性的話，我覺得還不如就選資料一致性較強的
HBase（不過我不太喜歡要分一堆角色的分散式系統，感覺在架構配置上會比較麻煩）。</p>
                    </section>
                </article>
                <hr/>
            </li>
            <li>
                <article class="post-entry">
                    <header class="entry-header">
                        <time class="post-time" datetime="2012-02-14T23:46:00" pubdate>
                            Tue 14 February 2012
                        </time>
                        <a href="http://blog.carlcarl.me/249/svn-status/" rel="bookmark"><h1>svn status appear「~」</h1></a>
                    </header>
                    <section class="post-content">
                        <p>最近遇到有人有這個問題，查了一下，這個問題的原因是因為從「一般檔案, 資料夾, 連結」這三種屬性，該檔案從其中一個屬性換成另外一種屬性就會出現這個波浪號狀態。</p>
<p>不過當然有時候事情不是那麼簡單......，這次遇到的主要原因應該是因為資料夾內的
<code>.svn</code> 被刪掉了，所以從外面看就會出現這種情形，以下是查到的解決方法：</p>
<div class="highlight"><pre>mv <span class="nb">test </span>test2
svn delete <span class="nb">test</span>
mv test2 <span class="nb">test</span>
svn add <span class="nb">test</span>
</pre></div>


<p>首先先改資料夾名稱，因為等下要刪掉原本這個資料夾的 svn 紀錄，直接 delete
的話，資料夾就真的會被刪掉，刪完之後再把改過名稱的資料夾改回原來的名稱，改完之後再重新
add，應該就會顯示正常了。</p>
                    </section>
                </article>
                <hr/>
            </li>
            <li>
                <article class="post-entry">
                    <header class="entry-header">
                        <time class="post-time" datetime="2012-02-10T00:43:00" pubdate>
                            Fri 10 February 2012
                        </time>
                        <a href="http://blog.carlcarl.me/245/different-color-in-screen-and-normal-mode/" rel="bookmark"><h1>Different color in screen and normal mode</h1></a>
                    </header>
                    <section class="post-content">
                        <p>查了一下資料，發現應該是跟顏色的支援有關，要在 <code>.screerc</code> 裡加上一行：</p>
<div class="highlight"><pre>termcapinfo xterm &#39;Co#256:AB=E[48;5;%dm:AF=E[38;5;%dm&#39;
</pre></div>


<p>參考網址：<br />
<a href="http://fcamel-fc.blogspot.com/2009/04/python-vim.html">http://fcamel-fc.blogspot.com/2009/04/python-vim.html</a></p>
                    </section>
                </article>
                <hr/>
            </li>
            <li>
                <article class="post-entry">
                    <header class="entry-header">
                        <time class="post-time" datetime="2012-02-04T18:56:00" pubdate>
                            Sat 04 February 2012
                        </time>
                        <a href="http://blog.carlcarl.me/239/linux-mint-cinnanmon-change-position-of-window-buttons/" rel="bookmark"><h1>Linux Mint cinnamon change position of window buttons</h1></a>
                    </header>
                    <section class="post-content">
                        <p>==================================================<br />
2012/03/28更新</p>
<h1>cinnamon 已經有提供修改按鈕位置的設定了，所以就不用照以下的方法來改哩。</h1>
<p>最近裝了 cinnamon 來玩玩，是有一些有趣的東西沒錯，像是視窗動畫，不過整體來說，我覺得並沒有好到值得我換成這套，所以用了沒多久我就換回來 Gnome 啦～～。</p>
<p>不過這邊還是來講一下 cinnamon 怎麼改變視窗按鈕位置的方法吧。</p>
<p>首先先裝編輯設定的套件</p>
<div class="highlight"><pre>apt-get install gconf-editor
</pre></div>


<p>執行後會出現一個視窗，接著如以下圖片，可以看到右邊有 <code>button layout</code> 這個欄位，有關閉，最小化，最大化的值，<code>:</code> 代表相對位置，如下圖的話指的是放在左邊，如果要放在右邊的話就把 <code>:</code> 移到前面就
OK 了。</p>
<p><img alt="gconf-editor" src="http://198.199.117.21/wp-content/uploads/2012/02/502.png" /></p>
                    </section>
                </article>
                <hr/>
            </li>
            <li>
                <article class="post-entry">
                    <header class="entry-header">
                        <time class="post-time" datetime="2011-12-19T17:01:00" pubdate>
                            Mon 19 December 2011
                        </time>
                        <a href="http://blog.carlcarl.me/233/naming-apache-log-with-date/" rel="bookmark"><h1>naming apache log with date</h1></a>
                    </header>
                    <section class="post-content">
                        <p>目前是用 <code>logrotate</code> 來作，只要在 <code>/etc/logrotate.d/apache2</code> 裡加入下面這個參數即可：</p>
<ul>
<li>dateext</li>
</ul>
<p>另外可以根據需求看要不要把 <code>weekly</code> 改為 <code>daily</code> 這樣。</p>
<p>處理過後的檔名就會像這樣 <code>access.log-20111218.gz</code>，這樣在之後處理和分析
log 會比較方便，另外記得數量也要根據需求改，因為改完後變成能保存的 log
日期也會跟著減少，要增多的話也是直接修改上面 <code>/etc/logrotate.d/apache2</code> 這個檔案，將 <code>rotate</code> 後面的數字加大，後面的數字表示要存的 log 數量，超過的話就會將最舊的刪除這樣。</p>
<p>後記：<br />
如果要跟 awstats 搭配的話可以在裡面加入：</p>
<div class="highlight"><pre>prerotate
    /usr/lib/cgi-bin/awstats.pl -config ...</pre></div>
                    </section>
                </article>
                <hr/>
            </li>
            <li>
                <article class="post-entry">
                    <header class="entry-header">
                        <time class="post-time" datetime="2011-12-17T18:00:00" pubdate>
                            Sat 17 December 2011
                        </time>
                        <a href="http://blog.carlcarl.me/226/mysql-db-engine-with-log-archive/" rel="bookmark"><h1>MySQL DB engine with log: Archive</h1></a>
                    </header>
                    <section class="post-content">
                        <p>前一陣子在看什麼 engine 比較適合拿來單純存
log，後來看到 <code>Archive</code> 這個似乎不錯，主要有以下優點：</p>
<ul>
<li>insert 速度更快。</li>
<li>佔的資料量較 Myisam 少。</li>
</ul>
<p>但是有優勢，就會有相對的劣勢，Archive 有以下缺點：</p>
<ul>
<li>不支援 delete 和 update，只能 insert 和 select。</li>
<li>不支援 index。</li>
</ul>
<p>（如果你是想要存每次最後登入時間的話，那 Archive 的確是不適合，因為不支援
index 和 update。）</p>
<p>但是以現實角度來看單純的 log 表，像是存每次登入的紀錄：</p>
<ul>
<li>其實真的就只會用到 insert，會用到 delete 和 update 那這個應該不太叫
    log。</li>
<li>作 select 的機率也是微乎其微 ...</li></ul>
                    </section>
                </article>
                <hr/>
            </li>
            <li>
                <article class="post-entry">
                    <header class="entry-header">
                        <time class="post-time" datetime="2011-12-15T02:51:00" pubdate>
                            Thu 15 December 2011
                        </time>
                        <a href="http://blog.carlcarl.me/218/several-ways-to-check-process-port/" rel="bookmark"><h1>Several ways to check process port</h1></a>
                    </header>
                    <section class="post-content">
                        <p>目前知道的就以下四種，記得用 root
權限來看，或者是指令前面加 <code>sudo</code>，不然有些 process 會看不到。</p>
<ul>
<li>netstat -antp</li>
<li>rpcinfo -p</li>
<li>lsof -i :port</li>
<li>fuser port/tcp</li>
</ul>
<p>以上指令的 <code>port</code> 為你要的 port
數字。基本上用 <code>netstat</code> 會列出一堆清單，通常就可以在其中找到，不行的話就使用 <code>lsof</code>，還是沒有的話，接下來就用 <code>fuser</code>，如果真的還是沒有，最後就用 <code>rpcinfo</code> 查看，再沒有我就沒辦法了 XD。</p>
<p>如果是要看 80 port 被什麼所佔用，可以如下使用：</p>
<div class="highlight"><pre>lsof -i :80
fuser 80:tcp ...</pre></div>
                    </section>
                </article>
                <hr/>
            </li>
            <li>
                <article class="post-entry">
                    <header class="entry-header">
                        <time class="post-time" datetime="2011-12-10T00:22:00" pubdate>
                            Sat 10 December 2011
                        </time>
                        <a href="http://blog.carlcarl.me/170/mysql-change-engine-of-all-tables/" rel="bookmark"><h1>MySQL change engine of all tables</h1></a>
                    </header>
                    <section class="post-content">
                        <p>最近裝好<a href="http://mariadb.org/">mariaDB</a>，想順便把之前用的 <code>Myisam</code> 改成新的 <code>Aria</code> engine，可是
table 一堆，在 phpmyadmin 介面上也找不到比較方便的功能可以直接轉換所有的
table engine。</p>
<p>後來查了一下，有幾種作法，一種是寫 php，然後 for 迴圈用 sql 修改
engine，不過為了這個寫 php 總是覺得很奇怪。後來查到另外一個作法：</p>
<div class="highlight"><pre><span class="k">select</span> <span class="n">concat</span><span class="p">(</span><span class="s1">&#39;alter table &#39;</span><span class="p">,</span><span class="k">table_name</span><span class="p">,</span> <span class="s1">&#39; engine = Aria;&#39;</span><span class="p">)</span>
<span class="k">from</span> <span class="n">information_schema</span><span class="p">.</span><span class="n">tables</span>
<span class="k">where</span> <span class="n">table_schema</span> <span class="k">in</span> <span class="p">(</span><span class="s1">&#39;db1&#39;</span><span class="p">,</span><span class="s1">&#39;db2&#39;</span><span class="p">,....,</span><span class="s1">&#39;dbN&#39;</span><span class="p">)</span>
</pre></div>


<p>要注意 <code>table_name</code> 不用改，這個是 <code>informatio_schema ...</code></p>
                    </section>
                </article>
                <hr/>
            </li>
            <li>
                <article class="post-entry">
                    <header class="entry-header">
                        <time class="post-time" datetime="2011-12-05T19:37:00" pubdate>
                            Mon 05 December 2011
                        </time>
                        <a href="http://blog.carlcarl.me/166/98address-already-in-use-make_sock-could-not-bind-to-address-80/" rel="bookmark"><h1>(98)Address already in use: make_sock: could not bind to address 80</h1></a>
                    </header>
                    <section class="post-content">
                        <p>最近在重開 server 的時候突然發現 apache
怎麼沒有開，重開之後就出現如標題的錯誤，查了一下，應該是有個莫名的
process 把 port 給 bind 住了，用了一堆指令，一直 kill
process，結果怎麼好像都沒用囧，後來才試到一個可以解決的指令：</p>
<div class="highlight"><pre>sudo fuser 80/tcp
</pre></div>


<p>執行之後就會顯示是哪個 process id 佔住的。<br />
很奇怪的是我使用「netstat」去看居然是找不到的=
=，另外要注意的是記得使用「sudo」或者是用 root
來查看，不然有可能會看不到。砍掉之後，再開啟 apache
就可以成功開啟了，算是一個滿怪的問題，當初忙著砍掉，忘記先查看 process
的名稱是什麼，只能先紀錄起來，下次如果還是發生一樣的情況的話，再來看看哩。</p>
<p>參考網址 ...</p>
                    </section>
                </article>
                <hr/>
            </li>
        </ol>
        <div class="paginator">
                    <a href="http://blog.carlcarl.me/author/carlcarl12.html">
                        <i class="fa fa-arrow-circle-left"></i>
                    </a>
            Page 13 / 19
                <a href="http://blog.carlcarl.me/author/carlcarl14.html">
                    <i class="fa fa-arrow-circle-right"></i>
                </a>
        </div>

    </div>
        </div>

<script>
    var _gaq=[['_setAccount','UA-24249240-5'],['_trackPageview']];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script'));
</script>
        <script src="http://blog.carlcarl.me/theme/js/main.js"></script>
    </body>
</html>