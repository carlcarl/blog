<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>    Raspberry Pi BT Transmission
</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
            <meta property="og:site_name" content="carlcarl's blog" />
                <meta property="og:type" content="article" />
                <meta property="og:title" content="Raspberry Pi BT Transmission" />
                <meta property="og:url" content="http://blog.carlcarl.me/1387/raspberry_pi_bt_transmission/" />
                <meta property="og:description" content="研究了一下怎麼在 raspberry pi + ArchLinux 上用 BT，好像都是用 transmission，所以我就跟著用了XD，下面是一些步驟。 安裝 transmission daemon sudo pacman -S transmission-cli Run transmission daemon 由於一開始沒有設定檔，要先跑過才有，所以先跑一下，是說要這樣做也太囧。 sudo systemctl enable transmission sudo systemctl start transmission sudo systemctl stop transmission 修改設定檔 設定檔位置在 /var/lib/transmission/.config/transmission-daemon/settings.json (這位置好爛)，我自己的設定檔如下，後方的 M 表示新增或改過的 ..." />
                    <meta property="article:tag" content="raspberry" />
            <link rel="stylesheet" href="http://blog.carlcarl.me/theme/css/normalize.css">
        <link href='//fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
        <link href='//fonts.googleapis.com/css?family=Oswald' rel='stylesheet' type='text/css'>
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" rel="stylesheet">
        <link rel="stylesheet" href="http://blog.carlcarl.me/theme/css/main.css">

    <link rel="stylesheet" href="http://blog.carlcarl.me/theme/css/blog.css">
    <link rel="stylesheet" href="http://blog.carlcarl.me/theme/css/github.css">
        <link href="http://blog.carlcarl.me/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="carlcarl's blog Atom Feed" />
        <script src="http://blog.carlcarl.me/theme/js/vendor/modernizr-2.7.1.min.js"></script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

        <div id="wrapper">
<header id="sidebar" class="side-shadow">
        <h1><a id="site-title" href="http://blog.carlcarl.me"><i class="fa fa-coffee"></i> carlcarl's blog</a></h1>
        <p id="site-desc"></p>
    <nav>
        <ul id="nav-links">
        </ul>
    </nav>
<footer id="site-info">
    <p>
        Proudly powered by <a href="http://getpelican.com/" target="pelican">Pelican</a> and <a href="http://python.org/" target="python">Python</a>. Theme by <a href="https://github.com/hdra/pelican-cait" target="github">hndr</a>.
    </p>
    <p>
        Textures by <a href="http://subtlepatterns.com/" target="subtlepatterns">Subtle Pattern</a>. Font Awesome by <a href="http://fortawesome.github.io/Font-Awesome/" target="github">Dave Grandy</a>.
    </p>
</footer></header>
    <div id="post-container">
        <ol id="post-list">
            <li>
                <article class="post-entry">
                    <header class="entry-header">
                        <time class="post-time" datetime="2014-01-21T03:00:00+08:00" pubdate>
                            Tue 21 January 2014
                        </time>
                        <a href="http://blog.carlcarl.me/1387/raspberry_pi_bt_transmission/" rel="bookmark"><h1>Raspberry Pi BT Transmission</h1></a>
                    </header>

                    <section class="post-content">
                        <p>研究了一下怎麼在 <a href="http://www.raspberrypi.org">raspberry pi</a> + <a href="https://www.archlinux.org">ArchLinux</a> 上用 BT，好像都是用 <a href="http://www.transmissionbt.com">transmission</a>，所以我就跟著用了XD，下面是一些步驟。</p>
<h2>安裝 transmission daemon</h2>
<div class="highlight"><pre>sudo pacman -S transmission-cli
</pre></div>


<h2>Run transmission daemon</h2>
<p>由於一開始沒有設定檔，要先跑過才有，所以先跑一下，是說要這樣做也太囧。</p>
<div class="highlight"><pre>sudo systemctl <span class="nb">enable </span>transmission
sudo systemctl start transmission
sudo systemctl stop transmission
</pre></div>


<h2>修改設定檔</h2>
<p>設定檔位置在 <code>/var/lib/transmission/.config/transmission-daemon/settings.json</code> (這位置好爛)，我自己的設定檔如下，後方的 <code>M</code> 表示新增或改過的:</p>
<div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;alt-speed-down&quot;</span><span class="o">:</span> <span class="mi">50</span><span class="p">,</span>
    <span class="s2">&quot;alt-speed-enabled&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="s2">&quot;alt-speed-time-begin&quot;</span><span class="o">:</span> <span class="mi">540</span><span class="p">,</span>
    <span class="s2">&quot;alt-speed-time-day&quot;</span><span class="o">:</span> <span class="mi">127</span><span class="p">,</span>
    <span class="s2">&quot;alt-speed-time-enabled&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="s2">&quot;alt-speed-time-end&quot;</span><span class="o">:</span> <span class="mi">1020</span><span class="p">,</span>
    <span class="s2">&quot;alt-speed-up&quot;</span><span class="o">:</span> <span class="mi">50</span><span class="p">,</span>
    <span class="s2">&quot;bind-address-ipv4&quot;</span><span class="o">:</span> <span class="s2">&quot;0.0.0.0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bind-address-ipv6&quot;</span><span class="o">:</span> <span class="s2">&quot;::&quot;</span><span class="p">,</span>
    <span class="s2">&quot;blocklist-enabled&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="s2">&quot;blocklist-url&quot;</span><span class="o">:</span> <span class="s2">&quot;http://www.example.com/blocklist&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cache-size-mb&quot;</span><span class="o">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="s2">&quot;dht-enabled&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;download-dir&quot;</span><span class="o">:</span> <span class="s2">&quot;/mnt/BT/Complete&quot;</span><span class="p">,</span> <span class="cm">/* M */</span>
    <span class="s2">&quot;download-queue-enabled&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;download-queue-size&quot;</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span> <span class="cm">/* M */</span>
    <span class="s2">&quot;encryption&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;idle-seeding-limit&quot;</span><span class="o">:</span> <span class="mi">30</span><span class="p">,</span>
    <span class="s2">&quot;idle-seeding-limit-enabled&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="s2">&quot;incomplete-dir&quot;</span><span class="o">:</span> <span class="s2">&quot;/mnt/BT/Incomplete&quot;</span><span class="p">,</span> <span class="cm">/* M */</span>
    <span class="s2">&quot;incomplete-dir-enabled&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="cm">/* M */</span>
    <span class="s2">&quot;lpd-enabled&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="s2">&quot;message-level&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;peer-congestion-algorithm&quot;</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;peer-id-ttl-hours&quot;</span><span class="o">:</span> <span class="mi">6</span><span class="p">,</span>
    <span class="s2">&quot;peer-limit-global&quot;</span><span class="o">:</span> <span class="mi">200</span><span class="p">,</span>
    <span class="s2">&quot;peer-limit-per-torrent&quot;</span><span class="o">:</span> <span class="mi">50</span><span class="p">,</span>
    <span class="s2">&quot;peer-port&quot;</span><span class="o">:</span> <span class="mi">51413</span><span class="p">,</span>
    <span class="s2">&quot;peer-port-random-high&quot;</span><span class="o">:</span> <span class="mi">65535</span><span class="p">,</span>
    <span class="s2">&quot;peer-port-random-low&quot;</span><span class="o">:</span> <span class="mi">49152</span><span class="p">,</span>
    <span class="s2">&quot;peer-port-random-on-start&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="s2">&quot;peer-socket-tos&quot;</span><span class="o">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
    <span class="s2">&quot;pex-enabled&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;port-forwarding-enabled&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;preallocation&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;prefetch-enabled&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>    
    <span class="s2">&quot;queue-stalled-enabled&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;queue-stalled-minutes&quot;</span><span class="o">:</span> <span class="mi">30</span><span class="p">,</span>
    <span class="s2">&quot;ratio-limit&quot;</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s2">&quot;ratio-limit-enabled&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="s2">&quot;rename-partial-files&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;rpc-authentication-required&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="s2">&quot;rpc-bind-address&quot;</span><span class="o">:</span> <span class="s2">&quot;0.0.0.0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;rpc-enabled&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;rpc-password&quot;</span><span class="o">:</span> <span class="s2">&quot;{a803e8f49fd53e7d4516b14511e68ea109f4a62bfbiCsfoS&quot;</span><span class="p">,</span>
    <span class="s2">&quot;rpc-port&quot;</span><span class="o">:</span> <span class="mi">9091</span><span class="p">,</span>
    <span class="s2">&quot;rpc-url&quot;</span><span class="o">:</span> <span class="s2">&quot;/transmission/&quot;</span><span class="p">,</span>
    <span class="s2">&quot;rpc-username&quot;</span><span class="o">:</span> <span class="s2">&quot;carlcarl&quot;</span><span class="p">,</span> <span class="cm">/* M */</span>
    <span class="s2">&quot;rpc-whitelist&quot;</span><span class="o">:</span> <span class="s2">&quot;192.168.11.*&quot;</span><span class="p">,</span> <span class="cm">/* M */</span>
    <span class="s2">&quot;rpc-whitelist-enabled&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;scrape-paused-torrents-enabled&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;script-torrent-done-enabled&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="s2">&quot;script-torrent-done-filename&quot;</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;seed-queue-enabled&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="s2">&quot;seed-queue-size&quot;</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s2">&quot;speed-limit-down&quot;</span><span class="o">:</span> <span class="mi">2500</span><span class="p">,</span> <span class="cm">/* M */</span>
    <span class="s2">&quot;speed-limit-down-enabled&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="cm">/* M */</span>
    <span class="s2">&quot;speed-limit-up&quot;</span><span class="o">:</span> <span class="mi">50</span><span class="p">,</span> <span class="cm">/* M */</span>
    <span class="s2">&quot;speed-limit-up-enabled&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="cm">/* M */</span>
    <span class="s2">&quot;start-added-torrents&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;trash-original-torrent-files&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="s2">&quot;umask&quot;</span><span class="o">:</span> <span class="mi">18</span><span class="p">,</span>
    <span class="s2">&quot;upload-slots-per-torrent&quot;</span><span class="o">:</span> <span class="mi">14</span><span class="p">,</span>
    <span class="s2">&quot;utp-enabled&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;watch-dir&quot;</span><span class="o">:</span> <span class="s2">&quot;/mnt/BT/Torrents&quot;</span><span class="p">,</span> <span class="cm">/* M */</span>
    <span class="s2">&quot;watch-dir-enabled&quot;</span><span class="o">:</span> <span class="kc">true</span> <span class="cm">/* M */</span>
<span class="p">}</span>
</pre></div>


<p><code>download-dir</code> 和 <code>incomplete-dir</code> 分開來放比較能分清楚；rpc 的部分就修改了一下可以連 web 的 ip，這邊限制在 <code>192.168.11.*</code>，<code>rpc-username</code> 這邊應該可以不用，就改一下放著這樣XD，<code>speed-limit-*</code> 系列的就是限制下載和上傳的速度，基本上是要設，也可以透過 web 界面再來設定，<code>watch-dir</code> 是自動偵測如果這個資料夾底下有新的 torrent，就開始那個 torrent 的下載，目前可能還用不太到，也是先放著這樣，目前透過 web 上傳 torrent 應該就夠用了。</p>
<h2>執行 transmission deamon again</h2>
<p>改完設定檔後，連 <code>http://&lt;ip&gt;:9091</code> 應該就看得到了(<code>&lt;ip&gt;</code> 就是你板子的 ip)。</p>
<div class="highlight"><pre>sudo systemctl start transmission
</pre></div>


<h2>其他建議</h2>
<p>我個人是建議可以把下載資料夾改成 <code>775</code> 權限，然後將資料夾的 owner 設為自己的帳號，group owner 則用 <code>transmission</code>，使用上會比較方便，權限也做一點保留。</p>
<p>參考資料：<br />
<a href="https://lnxslck.wordpress.com/2013/03/08/transmission-daemon-on-archlinux-arm/">Transmission-daemon on Archlinux ARM</a><br />
<a href="https://wiki.archlinux.org/index.php/Transmission">Transmission Archlinux Wiki</a><br />
<a href="http://wwssllabcd.github.io/blog/2013/04/22/how-to-setup-transmission-deamon-in-raspberry-pi/">打造脫機下載農場，使用Raspberry Pi + Transmission-daemon</a><br />
<a href="http://kasdia.tw/blog/2013/09/16/在vps上安裝transmission來進行bt下載/">在VPS上安裝TRANSMISSION來進行BT下載</a><br />
<a href="https://wiki.archlinux.org/index.php/fstab">fstab</a>  </p>
                    </section>
                    <hr/>
                    <aside class="post-meta">
                        <p>Category: <a href="http://blog.carlcarl.me/category/linux.html">linux</a></p>
                        <p>Tags: <a href="http://blog.carlcarl.me/tag/raspberry.html">raspberry</a>, </p>
                    </aside>
                    <hr/>
<div class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'carlcarl';
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
                </article>
            </li>
        </ol>
    </div>
        </div>

<script>
    var _gaq=[['_setAccount','UA-24249240-5'],['_trackPageview']];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script'));
</script>
        <script src="http://blog.carlcarl.me/theme/js/main.js"></script>
    </body>
</html>